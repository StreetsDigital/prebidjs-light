/* pbjs_engine Publisher Wrapper v1.0.0 | (c) 2024 */
(()=>{"use strict";var e={d:(n,t)=>{for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)},n={};e.d(n,{default:()=>r});const t="pb_config_cache",o=new Map;function i(e,n){var t;null===(t=o.get(e))||void 0===t||t.forEach(e=>{try{e(n)}catch(e){console.error("pb: Event callback error",e)}})}window.pb=function(){let e="",n=null,r=!1;return{version:"1.0.0",get publisherId(){return e},get pbjs(){return window.pbjs||null},init(){return o=this,a=void 0,s=function*(){var o;if(r)console.warn("pb: Already initialized");else try{if(e=function(){const e=document.getElementsByTagName("script");for(let n=0;n<e.length;n++){const t=e[n].src;if(t.includes("/pb/")||t.includes("/wrapper/")){const e=t.match(/\/([a-zA-Z0-9-]+)\.js/);if(e)return e[1]}}throw new Error("pb: Could not determine publisher ID from script URL")}(),n=function(e){try{const n=localStorage.getItem(`${t}_${e}`);if(n){const e=JSON.parse(n);if(Date.now()-e.timestamp<3e5)return e.data}}catch(e){}return null}(e),!n){const i=(null===(o=this._config)||void 0===o?void 0:o.apiEndpoint)||"",r=yield fetch(`${i}/c/${e}`);if(!r.ok)throw new Error(`Config fetch failed: ${r.status}`);n=yield r.json(),function(e,n){try{const o={data:n,timestamp:Date.now()};localStorage.setItem(`${t}_${e}`,JSON.stringify(o))}catch(e){}}(e,n)}window.pbjs=window.pbjs||{que:[]},window.pbjs.que.push(()=>{n&&"object"==typeof n&&"prebidConfig"in n&&window.pbjs.setConfig(n.prebidConfig),n&&"object"==typeof n&&"adUnits"in n&&window.pbjs.addAdUnits(n.adUnits),["auctionInit","auctionEnd","bidRequested","bidResponse","bidWon","bidTimeout","noBid","adRenderSucceeded","adRenderFailed"].forEach(n=>{window.pbjs.onEvent(n,t=>{i(n,t),function(e){var n;const t=(null===(n=window.pb._config)||void 0===n?void 0:n.apiEndpoint)||"";if(t)try{const n=JSON.stringify(e);navigator.sendBeacon?navigator.sendBeacon(`${t}/b`,n):fetch(`${t}/b`,{method:"POST",body:n,keepalive:!0})}catch(e){console.error("pb: Beacon error",e)}}([{eventType:n,publisherId:e,timestamp:(new Date).toISOString(),data:t}])})}),r=!0,i("pbReady",{publisherId:e})})}catch(e){throw console.error("pb: Initialization failed",e),i("pbError",{error:e}),e}},new((d=void 0)||(d=Promise))(function(e,n){function t(e){try{r(s.next(e))}catch(e){n(e)}}function i(e){try{r(s.throw(e))}catch(e){n(e)}}function r(n){var o;n.done?e(n.value):(o=n.value,o instanceof d?o:new d(function(e){e(o)})).then(t,i)}r((s=s.apply(o,a||[])).next())});var o,a,d,s},refresh(e){r&&window.pbjs?window.pbjs.que.push(()=>{window.pbjs.requestBids({adUnitCodes:e,bidsBackHandler:()=>{var n;window.pbjs.setTargetingForGPTAsync(e),(null===(n=window.googletag)||void 0===n?void 0:n.pubads)&&window.googletag.pubads().refresh(),i("refreshComplete",{adUnitCodes:e})}})}):console.warn("pb: Not initialized")},getConfig:()=>n,setConfig(e){r&&window.pbjs?window.pbjs.que.push(()=>{window.pbjs.setConfig(e),n=Object.assign(Object.assign({},n),e),i("configUpdated",{config:n})}):console.warn("pb: Not initialized")},on(e,n){!function(e,n){o.has(e)||o.set(e,new Set),o.get(e).add(n)}(e,n)},off(e,n){!function(e,n){var t;n?null===(t=o.get(e))||void 0===t||t.delete(n):o.delete(e)}(e,n)}}}();const r=window.pb;window.pb=n.default})();
//# sourceMappingURL=pb.min.js.map